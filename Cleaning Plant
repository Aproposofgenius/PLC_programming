VAR
S1 at %I0.0 :BOOL;     
S2 at %I0.1 :BOOL;
S3 at %I0.3 :BOOL; 
Y1 at %Q2.0 :BOOL;
Y2 at %Q2.1 :BOOL;
H1 at %Q2.2 :BOOL;
Flag :R_TRIG ;
CT1 :CTD;
TON1 :TON;
SR1 :SR;
SR2 :SR;
MD1 :BOOL;
MD2 :BOOL;
END_VAR

CAL FLAG (CLK :=S1)

LD S1
AND S3
ANDN CT1.Q
ST MD1
CAL SR1 (S1:= MD1 , R:=S2)  
LD SR1.Q1
ST Y1

CAL TON1(IN:=S2 , PT:=T#5S)

LD TON1.Q
AND S2
ST MD2
CAL SR2(S1:= MD2 , R:=S3)
LD SR2.Q1
ST Y2

CAL CT1(CD:=SR2.Q1 , LOAD:=FLAG.Q , PV:=3)

LD S1
ANDN CT1.Q
ST H1
